<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拼单 - 订单明细</title>
    <link rel="stylesheet" href="css/order-list.css">
    <script src="js/common.js"></script>
</head>
<body>
    <!-- 头部 -->
    <div class="header">
        <div class="header-content">
            <div class="header-left">
                <button class="back-btn" onclick="window.location.href='index.html'">← 返回首页</button>
            </div>
            <h1>我的订单</h1>
            <div class="user-info">
                <span id="userIdDisplay">用户ID: </span>
            </div>
        </div>
    </div>

    <!-- 订单列表 -->
    <div class="order-container">
        <div id="orderList" class="order-list">
            <!-- 订单项将通过JavaScript动态生成 -->
        </div>
        
        <!-- 加载更多按钮 -->
<!--        <div class="load-more-container">-->
<!--            <button id="loadMoreBtn" class="load-more-btn">加载更多</button>-->
<!--        </div>-->
        
        <!-- 空状态 -->
        <div id="emptyState" class="empty-state" style="display: none;">
            <div class="empty-content">
                <p>暂无订单数据</p>
            </div>
        </div>
    </div>

    <!-- 退单确认弹窗 -->
    <div id="refundModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>确认退单</h3>
            <p>确定要退单吗？退单后订单状态将变为已关闭。</p>
            <div class="modal-buttons">
                <button id="cancelRefund" class="cancel-btn">取消</button>
                <button id="confirmRefund" class="confirm-btn">确认退单</button>
            </div>
        </div>
    </div>

    <!-- 加载中提示 -->
    <div id="loadingTip" class="loading-tip" style="display: none;">
        <p>加载中...</p>
    </div>

    <script>
        // 倒计时逻辑（从index.js复制）
        class Countdown {
            constructor(element, initialTime) {
                this.element = element;
                this.remaining = this.parseTime(initialTime);
                this.timer = null;
                this.start();
            }

            parseTime(timeString) {
                const [hours, minutes, seconds] = timeString.split(':').map(Number);
                return hours * 3600 + minutes * 60 + seconds;
            }

            formatTime(seconds) {
                const h = Math.floor(seconds / 3600).toString().padStart(2, '0');
                const m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
                const s = (seconds % 60).toString().padStart(2, '0');
                return `${h}:${m}:${s}`;
            }

            update() {
                this.remaining--;
                if (this.remaining <= 0) {
                    this.element.textContent = '00:00:00';
                    this.stop();
                    return;
                }
                this.element.textContent = this.formatTime(this.remaining);
            }

            start() {
                this.timer = setInterval(() => this.update(), 1000);
            }

            stop() {
                clearInterval(this.timer);
            }
        }
    </script>
    <script src="js/order-list.js"></script>
</body>
</html>